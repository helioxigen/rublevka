<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <%=title%> <%=meta%> <%=link%>
    <link href="/favicon.png" rel="icon" type="image/png" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="/<%=vendorCss%>" />
    <link rel="stylesheet" href="/<%=appCss%>" />
    <%=styles%>

    <script>
      window.releaseStage = '<%=APP_ENV%>';
      window.appVersion = '<%=BUILD_ID%>';
    </script>

    <% if (REACT_APP_UIS_ID) { %>
      <script>
        var __cs = __cs || [];
        __cs.push(['setCsAccount', '<%=REACT_APP_UIS_ID%>']);
      </script>
      <script async src="https://app.uiscom.ru/static/cs.min.js"></script>
    <% } %>
  </head>
  <body>
    <div id="app"><%=html%></div>

    <script>
      window.__PRELOADED_STATE__ = <%=stringifiedPreloadedState%>
    </script>

    <% if (REACT_APP_ROISTAT_ID) { %>
      <script>
        (function(w, d, s, h, id) {
          w.roistatProjectId = id;
          w.roistatHost = h;
          var p = d.location.protocol == 'https:' ? 'https://' : 'http://';
          var u = /^.*roistat_visit=[^;]+(.*)?$/.test(d.cookie)
            ? '/dist/module.js'
            : '/api/site/1.0/' + id + '/init';
          var js = d.createElement(s);
          js.charset = 'UTF-8';
          js.async = 1;
          js.src = p + h + u;
          var js2 = d.getElementsByTagName(s)[0];
          js2.parentNode.insertBefore(js, js2);
        })(
          window,
          document,
          'script',
          'cloud.roistat.com',
          '<%=REACT_APP_ROISTAT_ID%>',
        );
      </script>
    <% } %>

    <% if (REACT_APP_TARGETIX_PIXEL_ID) { %>
      <script>
        window._txq = window._txq || [];
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//st.targetix.net/txsp.js';
        (
          document.getElementsByTagName('head')[0] ||
          document.getElementsByTagName('body')[0]
        ).appendChild(s);
        _txq.push(['createPixel', '<%=REACT_APP_TARGETIX_PIXEL_ID%>']);
        _txq.push(['track', 'PageView']);
      </script>
    <% } %>

    <% if (REACT_APP_FACEBOOK_PIXEL_ID) { %>
      <!-- Facebook Pixel Code -->
      <script>
        !(function(f, b, e, v, n, t, s) {
          if (f.fbq) return;
          n = f.fbq = function() {
            n.callMethod
              ? n.callMethod.apply(n, arguments)
              : n.queue.push(arguments);
          };
          if (!f._fbq) f._fbq = n;
          n.push = n;
          n.loaded = !0;
          n.version = '2.0';
          n.queue = [];
          t = b.createElement(e);
          t.async = !0;
          t.src = v;
          s = b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t, s);
        })(
          window,
          document,
          'script',
          'https://connect.facebook.net/en_US/fbevents.js',
        );
        fbq('init', '<%=REACT_APP_FACEBOOK_PIXEL_ID%>');
        fbq('track', 'PageView');
      </script>
      <noscript
        ><img
          height="1"
          width="1"
          style="display:none"
          src="https://www.facebook.com/tr?id=${REACT_APP_FACEBOOK_PIXEL_ID}&ev=PageView&noscript=1"
      /></noscript>
      <!-- End Facebook Pixel Code -->
    <% } %>

    <% if (REACT_APP_GOOGLE_ANALYTICS_ID) { %>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script
        async
        src="https://www.googletagmanager.com/gtag/js?id=<%=REACT_APP_GOOGLE_ANALYTICS_ID%>"
      ></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', '${REACT_APP_GOOGLE_ANALYTICS_ID}');
      </script>
    <% } %>

    <% if (REACT_APP_YANDEX_METRIKA_ID) { %>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript">
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(<%=REACT_APP_YANDEX_METRIKA_ID%>, "init", {
          clickmap: true,
          trackLinks: true,
          accurateTrackBounce: true,
          webvisor: true
        });
      </script>
      <noscript>
        <div>
          <img
            src="https://mc.yandex.ru/watch/<%=REACT_APP_YANDEX_METRIKA_ID%>"
            style="position:absolute; left:-9999px;"
            alt=""
          />
        </div>
      </noscript>
      <!-- /Yandex.Metrika counter -->
    <% } %>

    <script src="/<%=manifestJs%>"></script>
    <script src="/<%=vendorJs%>"></script>
    <script src="/<%=appJs%>"></script>
  </body>
</html>
